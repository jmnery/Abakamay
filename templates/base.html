<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}My App{% endblock %}</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />

    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/3a0fa80045.js"
      crossorigin="anonymous"
    ></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap JavaScript -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore-compat.js"></script>

    <!-- SocketIo -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.8.1/socket.io.js"
      integrity="sha512-8BHxHDLsOHx+flIrQ0DrZcea7MkHqRU5GbTHmbdzMRnAaoCIkZ97PqZcXJkKZckMMhqfoeaJE+DNUVuyoQsO3Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <style>
      :root {
        --primary-color: #007ea7;
        --black: #353a47;
        --red: #ce4760;
        --green: #43b751;
        --dark-green: #339e5f;
        --light-green: #72d47d;
        --light-red: #db7286;
        --white: rgb(236, 244, 245);
      }
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      @font-face {
        font-family: "Montserrat";
        src: url("{{ url_for('static', filename='assets/Montserrat-VariableFont_wght.ttf') }}")
          format("truetype");
        font-weight: 100 900; /* Adjust the weight if needed */
        font-style: normal;
      }
      .content {
        flex: 1;
        background-color: rgb(236, 244, 245);
        font-family: "Montserrat", sans-serif;
      }
      .navbar {
        margin-bottom: 0;
        padding-left: 30px !important;
        padding-right: 30px !important;
        background-color: var(--black);
        display: flex; /* Enable flexbox on navbar */
        justify-content: space-between; /* Space between brand and nav items */
        align-items: center; /* Center items vertically */
      }
      .navbar-brand {
        font-weight: bold;
        margin-right: 0 !important;
        min-width: 200px;
        z-index: 99;
      }
      .navbar-nav {
        flex: 1; /* Allow the navbar items to grow and fill the space */
        display: flex; /* Enable flexbox */
        justify-content: center; /* Center the items horizontally */
      }
      @media (min-width: 992px) {
        .navbar-nav {
          margin-left: -200px !important; /* Apply negative margin on larger screens */
        }
      }
      .navbar-nav .nav-item {
        display: flex; /* Enables flexbox on nav items */
        align-items: center; /* Centers items vertically */
      }
      /* Highlighted filter section */
      .highlight {
        position: relative; /* Add this line */
        box-shadow: 0 0 20px rgba(255, 255, 0, 0.8);
        border: 2px solid rgba(255, 255, 0, 0.8);
        z-index: 1050; /* Ensure this is above the modal overlay */
        background-color: white; /* Optional: Ensure visibility of text */
        padding: 10px; /* Optional: Add some padding */
      }
      .clickable-div {
        display: inline-block;
        padding: 7px 15px; /* Add some padding for better appearance */
        background-color: var(--primary-color); /* Bootstrap primary color */
        color: white; /* Text color */
        border-radius: 5px; /* Rounded corners */
        cursor: pointer; /* Pointer cursor on hover */
        text-align: center; /* Center the text */
      }
      .clickable-div:hover {
        background-color: #03489c; /* Darker blue on hover */
      }

      /*summary modal*/
      .carousel,
      .carousel-inner {
        height: 100%;
      }

      .carousel-bg {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
        overflow: hidden; /* Ensure content doesn't overflow the rounded corners */
        position: relative; /* Added for proper positioning of text */
      }

      .carousel-bg img {
        width: 100%;
        height: 100%;
        object-fit: contain; /* Ensure the image fits and retains its aspect ratio */
        background: black; /* Set the background to black for areas not covered by the image */
      }

      .overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5); /* Dim effect with a black overlay */
      }

      .carousel-caption {
        position: absolute; /* Change to absolute for better positioning */
        bottom: 20px; /* Adjust as necessary */
        left: 50%;
        transform: translateX(-50%);
        width: 100%; /* Ensure the caption takes full width */
        text-align: center; /* Center align text */
      }

      .caption-bg {
        background: rgba(0, 0, 0, 0.7); /* Semi-transparent black background */
        padding: 10px; /* Padding around the text */
        display: flex; /* Use flexbox for layout */
        justify-content: center; /* Center the text horizontally */
        width: 100%; /* Ensure the caption background takes full width */
      }

      .caption-text {
        margin: 0; /* Remove default margin */
        flex-grow: 1; /* Allow the text to stretch */
        text-align: center; /* Center text within the container */
      }

      .carousel-item {
        align-items: center;
        justify-content: center;
        height: 100%;
      }

      .carousel-cover {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          #04ecd9,
          #00b4d8
        ); /* Gradient background */
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 99999;
        border-radius: 15px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        padding: 20px;
        text-align: center;
      }

      .cover-title {
        font-size: 3.5rem; /* Increased font size */
        font-weight: bold;
        margin-bottom: 20px;
        color: #ffffff;
        text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.5);
      }

      #startTutorial {
        font-size: 1.5rem; /* Larger button text */
        padding: 12px 24px;
        background-color: #008080;
        color: #ffffff;
        border: none;
        border-radius: 8px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      #startTutorial:hover {
        background-color: #00b4d8;
        transform: scale(1.05);
      }
    </style>
  </head>
  <body>
    <div class="content">{% block content %}{% endblock %}</div>
    <!-- Loading Modal -->
    <div
      class="modal"
      id="mainLoadingModal"
      tabindex="-1"
      aria-labelledby="mainLoadingModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
          <div class="modal-header" style="background-color: var(--black)">
            <h5
              class="modal-title"
              id="mainLoadingModalLabel"
              style="color: white"
            >
              Loading...
            </h5>
          </div>
          <div
            class="modal-body text-center d-flex align-items-center justify-content-center"
            style="padding: 25px"
          >
            <div class="spinner-border text-primary me-2" role="status"></div>
            <span id="loadingMessage">Loading...</span>
          </div>
        </div>
      </div>
    </div>
    <!-- summary Modal (Empty) -->
    <div
      class="modal fade"
      id="summaryModal"
      tabindex="-1"
      aria-labelledby="summaryModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content" style="background-color: var(--white)">
          <button
            type="button"
            class="btn-close btn-lg position-absolute"
            data-bs-dismiss="modal"
            aria-label="Close"
            style="
              top: 2rem;
              right: 2rem;
              z-index: 2000;
              background-color: white;
              border: 1px solid white;
              border-radius: 50%;
            "
          ></button>
          <div
            class="modal-body"
            id="summaryModalContent"
            style="padding: 0 !important"
          >
            <!-- Cover for the welcome message -->
            <div id="carouselCover" class="carousel-cover">
              <h1 class="cover-title">Welcome User</h1>
              <button id="startTutorial" type="button" class="btn btn-primary">
                Start the Tutorial
              </button>
            </div>
            <!-- Carousel in learnHelp.html -->
            <div
              id="helpCarousel"
              class="carousel slide"
              data-bs-ride="false"
              data-bs-wrap="false"
            >
              <div class="carousel-indicators">
                <button
                  type="button"
                  data-bs-target="#helpCarousel"
                  data-bs-slide-to="0"
                  class="active"
                  aria-current="true"
                  aria-label="Slide 1"
                ></button>
                <button
                  type="button"
                  data-bs-target="#helpCarousel"
                  data-bs-slide-to="1"
                  aria-label="Slide 2"
                ></button>
                <button
                  type="button"
                  data-bs-target="#helpCarousel"
                  data-bs-slide-to="2"
                  aria-label="Slide 3"
                ></button>
                <!-- Additional buttons for more slides -->
              </div>

              <div class="carousel-inner">
                <div class="carousel-item active">
                  <div class="carousel-bg">
                    <img
                      src="https://firebasestorage.googleapis.com/v0/b/abakada-flask.appspot.com/o/help%2Flearn00.png?alt=media"
                      class="d-block w-100"
                      alt="Collection Image"
                    />
                    <div class="overlay"></div>
                    <div class="carousel-caption d-none d-md-block">
                      <div class="caption-bg">
                        <h5 class="caption-text">
                          Learn each Filipino Abakada letters and how to use
                          them to spell words.
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="carousel-item">
                  <div class="carousel-bg">
                    <img
                      src="https://firebasestorage.googleapis.com/v0/b/abakada-flask.appspot.com/o/help%2Fquiz00.png?alt=media"
                      class="d-block w-100"
                      alt="Collection Image"
                    />
                    <div class="overlay"></div>
                    <div class="carousel-caption d-none d-md-block">
                      <div class="caption-bg">
                        <h5 class="caption-text">
                          Assess your knowledge by spelling words.
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="carousel-item">
                  <div class="carousel-bg">
                    <img
                      src="https://firebasestorage.googleapis.com/v0/b/abakada-flask.appspot.com/o/help%2Fcollection00.png?alt=media"
                      class="d-block w-100"
                      alt="Collection Image"
                    />
                    <div class="overlay"></div>
                    <div class="carousel-caption d-none d-md-block">
                      <div class="caption-bg">
                        <h5 class="caption-text">
                          Track your progress by looking at the completed words.
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Additional slides as needed -->
              </div>
              <button
                class="carousel-control-prev"
                type="button"
                data-bs-target="#helpCarousel"
                data-bs-slide="prev"
              >
                <span
                  class="carousel-control-prev-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button
                class="carousel-control-next"
                type="button"
                data-bs-target="#helpCarousel"
                data-bs-slide="next"
              >
                <span
                  class="carousel-control-next-icon"
                  aria-hidden="true"
                ></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const tutorialButton = document.getElementById("startTutorial");
      //const summaryLink = document.getElementById("appSummaryLink");
      const summaryModal = new bootstrap.Modal(
        document.getElementById("summaryModal")
      );

      tutorialButton.addEventListener("click", function () {
        // Hide the cover
        document.getElementById("carouselCover").style.display = "none";
        // Optionally, show the carousel explicitly
        document.getElementById("helpCarousel").style.display = "block"; // This should already be visible, but for safety
        // Show the carousel
        var carousel = new bootstrap.Carousel(
          document.getElementById("helpCarousel")
        );
        // Go to the first slide
        carousel.to(0);
      });
      // Add click event listener
      //summaryLink.addEventListener("click", function (event) {
      //  event.preventDefault(); // Prevent the default anchor behavior
      //  summaryModal.show(); // Show the modal
      //});
    });
    $(document).ready(function () {
      $('[data-toggle="popover"]').popover({
        trigger: "hover", // You can change this to 'click' if preferred
        html: true, // Allow HTML content
      });
    });
    function showLoadingModal(message) {
      // Set custom title and message
      document.getElementById("loadingMessage").innerText = message;

      // Show the loading modal
      $("#mainLoadingModal").modal("show");
    }
    function redirectTo(message, url) {
      // Set custom title and message
      document.getElementById("loadingMessage").innerText = message;

      // Show the loading modal
      $("#mainLoadingModal").modal("show");
      location.href = url;
    }

    // Handle page show event
    window.addEventListener("pageshow", function (event) {
      $("#mainLoadingModal").modal("hide");
    });
  </script>
</html>
